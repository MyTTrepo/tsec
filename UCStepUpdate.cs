using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace ConsoleApplication1
{
    class UCStepUpdate
    {
        private bool isVisual = true;
        public static string dumb = "44891482026867833,20190818,1585.00,1565.00,5270,81740030,129583913043.00,1559.00,1624.00,1599.00,1615.00;44891482026867833,20190819,1586.00,1594.00,5309,87020339,137996051821.00,1556.00,1609.00,1585.00,1564.00@9211775239375291,20181128,1451.00,1451.00,0,0,0.00,0.00,0.00,1451.00,0.00;9211775239375291,20181201,1451.00,1451.00,0,0,0.00,0.00,0.00,1451.00,0.00;9211775239375291,20181202,1579.00,1613.00,16879,276890461,437242012616.00,1557.00,1639.00,1451.00,1638.00;9211775239375291,20181203,1654.00,1657.00,7817,153175000,253391225760.00,1611.00,1657.00,1579.00,1638.00;9211775239375291,20181204,1724.00,1736.00,12870,218034863,375965882419.00,1660.00,1736.00,1654.00,1736.00;9211775239375291,20181205,1802.00,1810.00,11668,191478485,345135633785.00,1748.00,1810.00,1724.00,1781.00;9211775239375291,20181208,1884.00,1892.00,5345,83909648,158083326469.00,1825.00,1892.00,1802.00,1885.00;9211775239375291,20181209,1909.00,1930.00,22252,331034933,631808191917.00,1820.00,1978.00,1884.00,1978.00;9211775239375291,20181210,2035.00,2081.00,17445,255638040,520264431599.00,1956.00,2082.00,1909.00,1983.00;9211775239375291,20181211,2035.00,2081.00,0,0,0.00,0.00,0.00,2035.00,0.00;9211775239375291,20181212,2091.00,2088.00,22102,314892645,658316997576.00,2001.00,2136.00,2035.00,2070.00;9211775239375291,20181215,2032.00,1987.00,17577,213913381,434777374757.00,1987.00,2145.00,2091.00,2092.00;9211775239375291,20181216,1954.00,1931.00,5916,100775878,196885081827.00,1931.00,2030.00,2032.00,1950.00;9211775239375291,20181217,1865.00,1857.00,18311,302047730,563361153464.00,1857.00,1927.00,1954.00,1857.00;9211775239375291,20181218,1903.00,1921.00,13177,181773107,345879645413.00,1801.00,1935.00,1865.00,1855.00;9211775239375291,20181219,1868.00,1868.00,8828,110068553,205567478788.00,1830.00,1934.00,1903.00,1934.00;9211775239375291,20181222,1834.00,1825.00,8469,99679716,182858213324.00,1785.00,1898.00,1868.00,1860.00;9211775239375291,20181223,1879.00,1881.00,8236,117041114,219872104417.00,1785.00,1909.00,1834.00,1830.00;9211775239375291,20181224,1916.00,1926.00,5999,71058515,136123611492.00,1880.00,1945.00,1879.00,1900.00;9211775239375291,20181225,1911.00,1896.00,5664,67864021,129673669540.00,1890.00,1953.00,1916.00,1950.00;9211775239375291,20181226,1881.00,1875.00,7478,88768208,166997203859.00,1856.00,1920.00,1911.00,1920.00;9211775239375291,20181229,1858.00,1836.00,6870,76250197,141689644880.00,1830.00,1898.00,1881.00,1895.00;9211775239375291,20181230,1844.00,1845.00,5664,76128643,140382923938.00,1795.00,1888.00,1858.00,1835.00;9211775239375291,20181231,1874.00,1850.00,4864,60828564,113998876639.00,1847.00,1901.00,1844.00,1901.00;9211775239375291,20190101,1813.00,1799.00,9448,106846429,193668584608.00,1799.00,1856.00,1874.00,1856.00;9211775239375291,20190102,1736.00,1725.00,13020,146432861,254168476455.00,1723.00,1795.00,1813.00,1790.00;9211775239375291,20190105,1660.00,1650.00,10309,116289989,193084959091.00,1650.00,1731.00,1736.00,1680.00;9211775239375291,20190106,1708.00,1743.00,13563,182413126,311554885378.00,1590.00,1743.00,1660.00,1632.00;9211775239375291,20190107,1764.00,1750.00,7831,92738896,163576665777.00,1725.00,1790.00,1708.00,1750.00;9211775239375291,20190108,1715.00,1710.00,6230,75405584,129323017356.00,1693.00,1770.00,1764.00,1770.00;9211775239375291,20190109,1747.00,1728.00,5573,79577230,139018657504.00,1690.00,1866.00,1715.00,1778.00;9211775239375291,20190112,1666.00,1660.00,13047,172881087,287991066617.00,1660.00,1706.00,1747.00,1706.00;9211775239375291,20190113,1614.00,1628.00,11355,143334982,231271004430.00,1591.00,1661.00,1666.00,1621.00;9211775239375291,20190114,1595.00,1589.00,10603,109869919,175257782464.00,1575.00,1645.00,1614.00,1620.00;9211775239375291,20190115,1577.00,1586.00,10734,125967848,198609799821.00,1550.00,1622.00,1595.00,1580.00;9211775239375291,20190116,1596.00,1595.00,5780,66545717,106191169057.00,1585.00,1619.00,1577.00,1590.00;9211775239375291,20190119,1569.00,1560.00,6749,67675669,106212772429.00,1556.00,1612.00,1596.00,1612.00;9211775239375291,20190120,1516.00,1534.00,9271,99410646,150734208473.00,1501.00,1560.00,1569.00,1560.00;9211775239375291,20190121,1579.00,1591.00,13504,203193863,320874373149.00,1510.00,1591.00,1516.00,1591.00;9211775239375291,20190122,1580.00,1567.00,6232,82562885,130453807400.00,1551.00,1620.00,1579.00,1599.00;9211775239375291,20190123,1533.00,1530.00,7903,67632310,103650759414.00,1520.00,1561.00,1580.00,1559.00;9211775239375291,20190126,1468.00,1464.00,12879,144011197,211423115648.00,1457.00,1530.00,1533.00,1530.00;9211775239375291,20190127,1468.00,1454.00,7264,84698709,124325570265.00,1443.00,1509.00,1468.00,1452.00;9211775239375291,20190128,1416.00,1406.00,8192,90540518,128181943168.00,1402.00,1469.00,1468.00,1460.00;9211775239375291,20190129,1429.00,1433.00,17374,317461808,453795953315.00,1353.00,1489.00,1416.00,1420.00;9211775239375291,20190130,1387.00,1371.00,13970,191121766,265179888226.00,1369.00,1441.00,1429.00,1441.00;9211775239375291,20190202,1326.00,1318.00,6588,93095235,123430264097.00,1318.00,1357.00,1387.00,1350.00;9211775239375291,20190203,1271.00,1278.00,16170,269460487,342600275919.00,1260.00,1310.00,1326.00,1290.00;9211775239375291,20190204,1325.00,1334.00,4261,85786971,113637433090.00,1292.00,1334.00,1271.00,1292.00;9211775239375291,20190205,1387.00,1391.00,11055,245735040,340956987854.00,1354.00,1391.00,1325.00,1391.00;9211775239375291,20190206,1416.00,1388.00,14641,217326972,307760876486.00,1385.00,1449.00,1387.00,1430.00;9211775239375291,20190210,1355.00,1346.00,8947,140337882,190127497888.00,1346.00,1380.00,1416.00,1380.00;9211775239375291,20190212,1303.00,1299.00,8495,127297929,165918397576.00,1289.00,1345.00,1355.00,1325.00;9211775239375291,20190213,1355.00,1368.00,11637,216305953,293039234420.00,1300.00,1368.00,1303.00,1300.00;9211775239375291,20190216,1396.00,1382.00,9062,120587927,168333744429.00,1370.00,1418.00,1355.00,1375.00;9211775239375291,20190217,1343.00,1341.00,7445,102257259,137368766674.00,1330.00,1389.00,1396.00,1370.00;9211775239375291,20190218,1373.00,1364.00,4776,70507459,96805652791.00,1351.00,1440.00,1343.00,1390.00;9211775239375291,20190219,1387.00,1384.00,7063,110738188,153554249223.00,1353.00,1413.00,1373.00,1376.00;9211775239375291,20190220,1448.00,1456.00,11084,237525400,343917243634.00,1382.00,1456.00,1387.00,1394.00;9211775239375291,20190223,1517.00,1520.00,11835,272850005,413918063333.00,1480.00,1520.00,1448.00,1498.00;9211775239375291,20190224,1526.00,1499.00,13281,206910876,315839932435.00,1491.00,1562.00,1517.00,1550.00;9211775239375291,20190225,1548.00,1560.00,14275,240205411,371920999096.00,1488.00,1592.00,1526.00,1505.00;9211775239375291,20190226,1509.00,1506.00,9887,174467865,263268788739.00,1478.00,1555.00,1548.00,1520.00;9211775239375291,20190227,1495.00,1490.00,8473,143447231,214511590083.00,1475.00,1534.00,1509.00,1520.00;9211775239375291,20190302,1449.00,1449.00,8255,125085965,181283851585.00,1431.00,1484.00,1495.00,1484.00;9211775239375291,20190303,1429.00,1460.00,12608,198487782,283670566205.00,1396.00,1484.00,1449.00,1440.00;9211775239375291,20190304,1475.00,1470.00,8417,125509004,185119527950.00,1450.00,1488.00,1429.00,1472.00;9211775239375291,20190305,1441.00,1429.00,5443,78919623,113694034253.00,1425.00,1487.00,1475.00,1480.00;9211775239375291,20190306,1418.00,1419.00,6326,95843122,135879210034.00,1404.00,1448.00,1441.00,1420.00;9211775239375291,20190309,1385.00,1380.00,7671,102666771,142191957757.00,1375.00,1418.00,1418.00,1406.00;9211775239375291,20190310,1457.00,1445.00,9435,163153743,237769478506.00,1370.00,1548.00,1385.00,1370.00;9211775239375291,20190311,1479.00,1460.00,10827,207498599,306805284874.00,1435.00,1504.00,1457.00,1447.00;9211775239375291,20190312,1443.00,1430.00,6306,96559874,139301131734.00,1427.00,1472.00,1479.00,1455.00;9211775239375291,20190313,1450.00,1429.00,7670,129386763,187546703346.00,1426.00,1499.00,1443.00,1480.00;9211775239375291,20190316,1432.00,1423.00,8251,116501824,166827202177.00,1408.00,1465.00,1450.00,1430.00;9211775239375291,20190317,1437.00,1428.00,5392,76091971,109336886836.00,1421.00,1477.00,1432.00,1446.00;9211775239375291,20190318,1446.00,1440.00,5762,78934216,114117936194.00,1437.00,1459.00,1437.00,1440.00;9211775239375291,20190319,1465.00,1462.00,7529,137639324,201668718969.00,1450.00,1480.00,1446.00,1450.00;9211775239375291,20190325,1449.00,1447.00,5098,63561126,92083090865.00,1440.00,1477.00,1465.00,1475.00;9211775239375291,20190326,1452.00,1464.00,7643,101521005,147445273897.00,1431.00,1469.00,1449.00,1450.00;9211775239375291,20190327,1518.00,1524.00,10426,235350064,357258152248.00,1468.00,1524.00,1452.00,1469.00;9211775239375291,20190330,1589.00,1593.00,11011,237725261,377665798861.00,1540.00,1593.00,1518.00,1560.00;9211775239375291,20190331,1584.00,1572.00,16080,229097328,362906994000.00,1531.00,1645.00,1589.00,1630.00;9211775239375291,20190406,1601.00,1613.00,9185,146915872,235232752903.00,1548.00,1625.00,1584.00,1591.00;9211775239375291,20190407,1670.00,1639.00,14609,349939681,584321999063.00,1621.00,1681.00,1601.00,1640.00;9211775239375291,20190408,1691.00,1707.00,18965,341774293,578008697676.00,1619.00,1738.00,1670.00,1640.00;9211775239375291,20190409,1690.00,1705.00,13912,232791906,393492594792.00,1652.00,1739.00,1691.00,1699.00;9211775239375291,20190410,1748.00,1751.00,15312,260484062,455455364858.00,1689.00,1772.00,1690.00,1718.00;9211775239375291,20190413,1727.00,1700.00,14613,224141710,386987086132.00,1687.00,1800.00,1748.00,1774.00;9211775239375291,20190414,1682.00,1699.00,12535,187840409,315984137639.00,1649.00,1719.00,1727.00,1676.00;9211775239375291,20190415,1727.00,1710.00,10820,184042441,317859307749.00,1705.00,1759.00,1682.00,1705.00;9211775239375291,20190416,1669.00,1641.00,12922,199431015,332820928223.00,1641.00,1722.00,1727.00,1716.00;9211775239375291,20190417,1610.00,1611.00,11937,188612009,303666966773.00,1586.00,1645.00,1669.00,1610.00;9211775239375291,20190420,1660.00,1680.00,11054,180823366,300113473863.00,1625.00,1685.00,1610.00,1625.00;9211775239375291,20190422,1643.00,1612.00,12920,177492583,291551340038.00,1601.00,1710.00,1660.00,1710.00;9211775239375291,20190423,1604.00,1586.00,9444,132619187,212726079012.00,1582.00,1635.00,1643.00,1606.00;9211775239375291,20190424,1599.00,1600.00,10759,158783826,253875289316.00,1581.00,1636.00,1604.00,1600.00;9211775239375291,20190427,1616.00,1609.00,9797,158753277,256482388415.00,1601.00,1644.00,1599.00,1616.00;9211775239375291,20190428,1655.00,1671.00,12221,191717384,317359345297.00,1627.00,1675.00,1616.00,1627.00;9211775239375291,20190429,1715.00,1741.00,11216,179365420,307625991117.00,1689.00,1770.00,1655.00,1689.00;9211775239375291,20190430,1706.00,1673.00,14932,221924251,378595375824.00,1646.00,1770.00,1715.00,1770.00;9211775239375291,20190501,1677.00,1681.00,12442,203414932,341185220521.00,1649.00,1699.00,1706.00,1670.00;9211775239375291,20190504,1747.00,1760.00,19735,452145051,789808285625.00,1659.00,1760.00,1677.00,1659.00;9211775239375291,20190505,1822.00,1834.00,25234,617411040,1125074123299.00,1750.00,1834.00,1747.00,1808.00;9211775239375291,20190506,1883.00,1879.00,41158,1013887239,1908987242777.00,1780.00,1913.00,1822.00,1890.00;9211775239375291,20190507,1801.00,1789.00,22048,535396810,964221645264.00,1789.00,1920.00,1883.00,1895.00;9211775239375291,20190508,1834.00,1870.00,18764,395167702,724598400600.00,1780.00,1885.00,1801.00,1800.00;9211775239375291,20190511,1782.00,1743.00,17302,337783280,602038455529.00,1743.00,1833.00,1834.00,1785.00;9211775239375291,20190512,1698.00,1695.00,15875,369716505,627820453440.00,1693.00,1748.00,1782.00,1723.00;9211775239375291,20190513,1728.00,1743.00,10269,184637901,319089041493.00,1680.00,1770.00,1698.00,1710.00;9211775239375291,20190514,1749.00,1733.00,13662,228450848,399513570152.00,1725.00,1789.00,1728.00,1751.00;9211775239375291,20190515,1730.00,1719.00,11339,186002489,321748646265.00,1681.00,1775.00,1749.00,1762.00;9211775239375291,20190518,1763.00,1750.00,12502,205286855,361821976728.00,1716.00,1790.00,1730.00,1721.00;9211775239375291,20190519,1806.00,1820.00,16893,302476977,546221892688.00,1734.00,1841.00,1763.00,1759.00;9211775239375291,20190520,1783.00,1774.00,9224,154781329,275929397233.00,1753.00,1830.00,1806.00,1830.00;9211775239375291,20190521,1788.00,1773.00,8939,130861242,234000117420.00,1768.00,1810.00,1783.00,1768.00;9211775239375291,20190522,1767.00,1771.00,7197,103224533,182438658770.00,1751.00,1809.00,1788.00,1792.00;9211775239375291,20190525,1728.00,1730.00,6915,88385053,152695615367.00,1715.00,1771.00,1767.00,1768.00;9211775239375291,20190526,1736.00,1729.00,8800,108696298,188700508651.00,1718.00,1765.00,1728.00,1729.00;9211775239375291,20190528,1788.00,1778.00,9511,148121772,264817359499.00,1767.00,1810.00,1736.00,1767.00;9211775239375291,20190529,1777.00,1750.00,9811,143754834,255395058938.00,1745.00,1823.00,1788.00,1819.00;9211775239375291,20190601,1715.00,1714.00,14021,225229224,386245049705.00,1700.00,1746.00,1777.00,1725.00;9211775239375291,20190602,1743.00,1758.00,10098,161385245,281216042557.00,1712.00,1786.00,1715.00,1712.00;9211775239375291,20190603,1810.00,1810.00,13376,226716767,410245857407.00,1765.00,1828.00,1743.00,1765.00;9211775239375291,20190608,1802.00,1793.00,7581,117691301,212093142124.00,1780.00,1830.00,1810.00,1812.00;9211775239375291,20190609,1825.00,1826.00,11810,210999001,385072499880.00,1786.00,1860.00,1802.00,1792.00;9211775239375291,20190610,1825.00,1811.00,10737,182186068,332486456794.00,1806.00,1870.00,1825.00,1850.00;9211775239375291,20190611,1814.00,1817.00,10118,175805395,318908403428.00,1795.00,1850.00,1825.00,1850.00;9211775239375291,20190612,1800.00,1775.00,13297,205107527,369147643355.00,1770.00,1848.00,1814.00,1818.00;9211775239375291,20190615,1750.00,1741.00,10589,157748884,276115770271.00,1725.00,1777.00,1800.00,1762.00;9211775239375291,20190616,1757.00,1738.00,11385,170837369,300140110501.00,1729.00,1801.00,1750.00,1750.00;9211775239375291,20190617,1746.00,1736.00,6349,68605162,119783902650.00,1729.00,1800.00,1757.00,1774.00;9211775239375291,20190618,1724.00,1722.00,9928,118453696,204264851858.00,1702.00,1770.00,1746.00,1750.00;9211775239375291,20190619,1672.00,1670.00,8790,132445889,221404161869.00,1638.00,1722.00,1724.00,1722.00;9211775239375291,20190622,1672.00,1670.00,0,0,0.00,0.00,0.00,1672.00,0.00;9211775239375291,20190623,1672.00,1670.00,0,0,0.00,0.00,0.00,1672.00,0.00;9211775239375291,20190624,1748.00,1755.00,7191,119834985,209445703914.00,1655.00,1819.00,1672.00,1742.00;9211775239375291,20190625,1749.00,1780.00,11534,202030663,353414490590.00,1699.00,1789.00,1748.00,1760.00;9211775239375291,20190626,1829.00,1836.00,18325,429157109,784954386665.00,1766.00,1836.00,1749.00,1799.00;9211775239375291,20190630,1828.00,1804.00,13099,196677251,359445749478.00,1799.00,1874.00,1829.00,1870.00;9211775239375291,20190701,1781.00,1776.00,8620,138298529,246368440398.00,1770.00,1830.00,1828.00,1830.00;9211775239375291,20190702,1743.00,1740.00,11252,174269008,303686873818.00,1731.00,1790.00,1781.00,1790.00;9211775239375291,20190703,1736.00,1729.00,10152,152378685,264508053906.00,1720.00,1779.00,1743.00,1740.00;9211775239375291,20190706,1700.00,1690.00,15189,202773653,344661495192.00,1685.00,1743.00,1736.00,1740.00;9211775239375291,20190707,1700.00,1690.00,0,0,0.00,0.00,0.00,1700.00,0.00;9211775239375291,20190708,1700.00,1690.00,0,0,0.00,0.00,0.00,1700.00,0.00;9211775239375291,20190709,1700.00,1690.00,0,0,0.00,0.00,0.00,1700.00,0.00;9211775239375291,20190710,1684.00,1671.00,8876,125606265,211470895312.00,1666.00,1745.00,1700.00,1701.00;9211775239375291,20190713,1627.00,1635.00,18344,234017022,380664407311.00,1615.00,1670.00,1684.00,1662.00;9211775239375291,20190714,1647.00,1656.00,12436,141284541,232673582395.00,1618.00,1674.00,1627.00,1620.00;9211775239375291,20190715,1627.00,1615.00,10335,125519773,204201370083.00,1610.00,1670.00,1647.00,1660.00;9211775239375291,20190716,1560.00,1546.00,9024,104008297,162251803009.00,1546.00,1611.00,1627.00,1611.00;9211775239375291,20190717,1556.00,1540.00,12338,158624926,246789682226.00,1503.00,1600.00,1560.00,1530.00;9211775239375291,20190720,1541.00,1520.00,10609,115048941,177278830248.00,1516.00,1599.00,1556.00,1539.00;9211775239375291,20190721,1545.00,1545.00,8664,104185061,160949006560.00,1510.00,1575.00,1541.00,1510.00;9211775239375291,20190722,1573.00,1578.00,9292,129101484,203103897756.00,1549.00,1594.00,1545.00,1560.00;9211775239375291,20190723,1542.00,1548.00,6208,68116297,105047675856.00,1525.00,1595.00,1573.00,1595.00;9211775239375291,20190724,1522.00,1521.00,8706,102516858,156038444620.00,1514.00,1550.00,1542.00,1550.00;9211775239375291,20190727,1492.00,1488.00,12637,143490216,214065991647.00,1480.00,1543.00,1522.00,1520.00;9211775239375291,20190728,1536.00,1566.00,15315,248981265,382340355528.00,1453.00,1566.00,1492.00,1493.00;9211775239375291,20190729,1553.00,1539.00,8533,100858386,156619545468.00,1526.00,1590.00,1536.00,1570.00;9211775239375291,20190730,1525.00,1524.00,6675,82283478,125482090611.00,1515.00,1564.00,1553.00,1551.00;9211775239375291,20190731,1506.00,1508.00,9636,124893951,188040019713.00,1487.00,1549.00,1525.00,1516.00;9211775239375291,20190803,1488.00,1490.00,8895,108458227,161368865746.00,1480.00,1500.00,1506.00,1500.00;9211775239375291,20190804,1503.00,1506.00,8110,103325173,155257713132.00,1484.00,1535.00,1488.00,1491.00;9211775239375291,20190805,1503.00,1505.00,7760,111355912,167395563386.00,1496.00,1527.00,1503.00,1520.00;9211775239375291,20190806,1518.00,1513.00,7618,109816893,166705161003.00,1506.00,1546.00,1503.00,1514.00;9211775239375291,20190807,1501.00,1500.00,8849,119762701,179768682079.00,1491.00,1528.00,1518.00,1518.00;9211775239375291,20190810,1488.00,1487.00,10044,110691367,164678643302.00,1482.00,1510.00,1501.00,1501.00;9211775239375291,20190811,1483.00,1485.00,10082,116483571,172711015027.00,1474.00,1508.00,1488.00,1490.00;9211775239375291,20190813,1525.00,1557.00,11537,171909504,262190812703.00,1479.00,1557.00,1483.00,1489.00;9211775239375291,20190814,1600.00,1601.00,10962,254461954,407126416456.00,1572.00,1601.00,1525.00,1599.00;9211775239375291,20190817,1595.00,1581.00,12917,181934402,290112894193.00,1560.00,1630.00,1600.00,1630.00;9211775239375291,20190818,1603.00,1606.00,11482,162777270,260924770422.00,1561.00,1650.00,1595.00,1580.00;9211775239375291,20190819,1639.00,1639.00,8525,110740754,181459513005.00,1612.00,1680.00,1603.00,1633.00@46348559193224090,20190818,3902.00,3899.00,2448,21677522,84596348834.00,3890.00,3938.00,3931.00,3890.00;46348559193224090,20190819,3895.00,3892.00,3218,31231287,121651681965.00,3860.00,3918.00,3902.00,3918.00@63917421733088077,20190818,403.00,401.00,10585,294360317,118772664922.00,400.00,411.00,410.00,410.00;63917421733088077,20190819,403.00,406.00,10292,294720544,118892510998.00,399.00,410.00,403.00,401.00@22129017544200,20190722,1.00,1.00,0,0,0.00,0.00,0.00,1.00,0.00;22129017544200,20190723,1.00,1.00,0,0,0.00,0.00,0.00,1.00,0.00;22129017544200,20190724,1.00,1.00,0,0,0.00,0.00,0.00,1.00,0.00;22129017544200,20190727,1.00,1.00,0,0,0.00,0.00,0.00,1.00,0.00;22129017544200,20190728,797.00,783.00,606,9198408,7333301214.00,783.00,870.00,1.00,870.00;22129017544200,20190729,727.00,722.00,3895,59966876,43612598018.00,718.00,764.00,797.00,719.00;22129017544200,20190730,722.00,743.00,2970,46713507,33728788849.00,672.00,769.00,727.00,718.00;22129017544200,20190731,753.00,770.00,2567,44875728,33770753283.00,728.00,785.00,722.00,731.00;22129017544200,20190803,805.00,808.00,2580,40298388,32457282843.00,770.00,827.00,753.00,800.00;22129017544200,20190804,821.00,838.00,2290,40320260,33093892347.00,775.00,844.00,805.00,821.00;22129017544200,20190805,794.00,778.00,2086,32972438,26182562484.00,768.00,848.00,821.00,838.00;22129017544200,20190806,773.00,766.00,860,14886893,11514053293.00,757.00,796.00,794.00,770.00;22129017544200,20190807,783.00,789.00,1626,27508783,21532308453.00,760.00,800.00,773.00,766.00;22129017544200,20190810,795.00,799.00,1345,18944559,15067374972.00,770.00,809.00,783.00,797.00;22129017544200,20190811,850.00,873.00,3253,60163080,51128853568.00,791.00,873.00,795.00,807.00;22129017544200,20190813,909.00,928.00,2093,31752995,28859899785.00,865.00,928.00,850.00,878.00;22129017544200,20190814,956.00,927.00,2083,31016642,29645800143.00,921.00,990.00,909.00,935.00;22129017544200,20190817,953.00,938.00,1981,30680376,29223745860.00,890.00,995.00,956.00,931.00;22129017544200,20190818,912.00,900.00,1377,20661090,18833953616.00,890.00,962.00,953.00,927.00;22129017544200,20190819,899.00,907.00,1016,12954962,11642057166.00,880.00,923.00,912.00,900.00";
        public static bool UpdateClosingPrices()
        {
            Settings settings = new Settings();
            try
            {
                /*if (this.isVisual)
                {
                    this.rtbOperationLog.AppendText("\n\tدریافت اطلاعات ... ");
                    this.progressBar.Value = 0;
                    this.lblProgress.Text = "0%";
                }*/

                string str1 = "";
                try
                {
                    //str1 = ServerMethods.LastPossibleDeven();
                    str1 = "20190220;20190525";
                }
                catch (Exception ex)
                {
                    //ServerMethods.LogError("lastPossibleDEvens", ex);
                }
                if (str1.Equals("*"))
                {
                    /*if (this.isVisual)
                    {
                        this.rtbOperationLog.AppendText("\n\tبروز رسانی اطلاعات در حد فاصل ساعت هشت صبح تا یک بعد از ظهر روزهای شنبه تا چهارشنبه امکان پذیر نمی باشد.");
                        this.rtbOperationLog.AppendText("\n\tجهت ساخت فایلها با اطلاعات فعلی از دکمه تعبیه شده در پایین صفحه استفاده کنید.");
                    }*/
                    return false;
                }
                string[] strArray1 = str1.Split(';');
                int int32_1 = Convert.ToInt32(strArray1[0]);
                int int32_2 = Convert.ToInt32(strArray1[1]);
                long[][] numArray1 = new long[StaticData.SelectedInstruments.Count][];
                int index1 = 0;
                using (List<string>.Enumerator enumerator = StaticData.SelectedInstruments.GetEnumerator())
                {
                    while (enumerator.MoveNext())
                    {
                        string item = enumerator.Current;
                        int num = FileService.LastDeven(item);
                        InstrumentInfo instrumentInfo = StaticData.Instruments.Find((Predicate<InstrumentInfo>)(p => p.InsCode == Convert.ToInt64(item)));
                        if ((!(instrumentInfo.YMarNSC == "NO") || num != int32_1) && (!(instrumentInfo.YMarNSC == "ID") || num != int32_2))
                        {
                            numArray1[index1] = new long[3];
                            numArray1[index1][0] = Convert.ToInt64(item);
                            numArray1[index1][1] = Convert.ToInt64(num);
                            numArray1[index1][2] = instrumentInfo.YMarNSC == "NO" ? 0L : 1L;
                            ++index1;
                        }
                    }
                }
                int num1 = index1 % 20 != 0 ? index1 / 20 + 1 : index1 / 20;
                for (int index2 = 0; index2 < num1; ++index2)
                {
                    int length = index2 < num1 - 1 ? 20 : index1 % 20;
                    /*if (this.isVisual)
                    {
                        this.rtbOperationLog.AppendText("\n\tدریافت بخش " + (index2 + 1).ToString() + " از " + (object)num1 + " اطلاعات ... ");
                        if (length == 0)
                        {
                            this.lblProgress.Text = "100%";
                            continue;
                        }
                    }*/
                    long[][] numArray2 = new long[length][];
                    for (int index3 = 0; index3 < length; ++index3)
                    {
                        numArray2[index3] = new long[3];
                        numArray2[index3][0] = numArray1[index2 * 20 + index3][0];
                        numArray2[index3][1] = numArray1[index2 * 20 + index3][1];
                        numArray2[index3][2] = numArray1[index2 * 20 + index3][2];
                    }
                    string str2 = "";
                    foreach (long[] numArray3 in numArray2)
                        str2 = str2 + (object)numArray3[0] + "," + (object)numArray3[1] + "," + (object)numArray3[2] + ";";
                    //string insturmentClosingPrice = ServerMethods.GetInsturmentClosingPrice(str2.Substring(0, str2.Length - 1));
                    string insturmentClosingPrice = UCStepUpdate.dumb;
                    if (insturmentClosingPrice.Equals("*"))
                    {
                        /*if (this.isVisual)
                        {
                            this.rtbOperationLog.AppendText("\n\tبروز رسانی اطلاعات در حد فاصل ساعت هشت صبح تا یک بعد از ظهر روزهای شنبه تا چهارشنبه امکان پذیر نمی باشد.");
                            this.rtbOperationLog.AppendText("\n\tجهت ساخت فایلها با اطلاعات فعلی از دکمه تعبیه شده در پایین صفحه استفاده کنید.");
                        }*/
                        return false;
                    }
                    string str3 = insturmentClosingPrice;
                    char[] chArray = new char[1] { '@' };
                    foreach (string str4 in str3.Split(chArray))
                    {
                        if (!string.IsNullOrEmpty(str4))
                        {
                            List<ClosingPriceInfo> cpList = new List<ClosingPriceInfo>();
                            string[] strArray2 = str4.Split(';');
                            for (int index3 = 0; index3 < strArray2.Length; ++index3)
                            {
                                ClosingPriceInfo closingPriceInfo = new ClosingPriceInfo();
                                try
                                {
                                    string[] strArray3 = strArray2[index3].Split(',');
                                    closingPriceInfo.InsCode = Convert.ToInt64(strArray3[0].ToString());
                                    closingPriceInfo.DEven = Convert.ToInt32(strArray3[1].ToString());
                                    closingPriceInfo.PClosing = Convert.ToDecimal(strArray3[2].ToString());
                                    closingPriceInfo.PDrCotVal = Convert.ToDecimal(strArray3[3].ToString());
                                    closingPriceInfo.ZTotTran = Convert.ToDecimal(strArray3[4].ToString());
                                    closingPriceInfo.QTotTran5J = Convert.ToDecimal(strArray3[5].ToString());
                                    closingPriceInfo.QTotCap = Convert.ToDecimal(strArray3[6].ToString());
                                    closingPriceInfo.PriceMin = Convert.ToDecimal(strArray3[7].ToString());
                                    closingPriceInfo.PriceMax = Convert.ToDecimal(strArray3[8].ToString());
                                    closingPriceInfo.PriceYesterday = Convert.ToDecimal(strArray3[9].ToString());
                                    closingPriceInfo.PriceFirst = Convert.ToDecimal(strArray3[10].ToString());
                                    cpList.Add(closingPriceInfo);
                                }
                                catch (Exception ex)
                                {
                                    //ServerMethods.LogError("UpdateClosingPrices[Row:" + strArray2[index3] + "]", ex);
                                    throw ex;
                                }
                            }
                            FileService.WriteClosingPrices(cpList);
                            /*if (this.isVisual && cpList.Count > 0)
                            {
                                InstrumentInfo instrumentInfo = StaticData.Instruments.Find((Predicate<InstrumentInfo>)(p => p.InsCode == cpList[0].InsCode));
                                this.rtbOperationLog.AppendText("\n\t\tبروز رسانی اطلاعات " + instrumentInfo.Symbol + " (" + instrumentInfo.Name + ")");
                            }*/
                        }
                    }
                    /*if (this.isVisual)
                    {
                        this.lblProgress.Text = Convert.ToInt32((double)(index2 + 1) / (double)num1 * 100.0).ToString() + "%";
                    }*/
                }
                /*if (this.isVisual)
                {
                    if (num1 == 0)
                    {
                        this.lblProgress.Text = "100%";
                    }
                    this.rtbOperationLog.AppendText("\n\tبروز رسانی اطلاعات نمادها با موفقیت انجام گردید\t ");
                    this.rtbOperationLog.AppendText("\n\tجهت ایجاد خروجی جدید بر اساس اطلاعات بروز شده از دکمه تولید خروجی استفاده کنید ");
                }*/
                return true;
            }
            catch (Exception ex)
            {
                if (ex.Message.Contains("The magic number in GZip header is not correct") && settings.EnableDecompression)
                {
                    settings.EnableDecompression = false;
                    settings.Save();
                    //this.owner.TabSwitcher(Tabs.Update);
                    return false;
                }
                /*if (this.isVisual)
                {
                    this.rtbOperationLog.AppendText("\n\tبروز رسانی اطلاعات نمادها ناموفق بود. ");
                    this.rtbOperationLog.AppendText(ServerMethods.LogError(nameof(UpdateClosingPrices), ex));
                }*/
                try
                {
                    bool cond = false;
                    //bool cond = FileService.LogErrorFile("[ UpdateClosingPrices (" + StaticData.Version + ") ] " + ex.Message + "(" + (ex.InnerException != null ? ex.InnerException.Message ?? "" : "") + ")") == -1;
                    if (cond)
                    {
                        /*if (this.isVisual)
                        {
                            int num = (int)MessageBox.Show("مقدار فیلد محل ذخیره فایل ها صحیح نمی باشد ");
                        }*/
                    }
                }
                catch
                {
                    //this.rtbOperationLog.AppendText("\n\tثبت خطا در فایل ناموفق بود");
                }
                return false;
            }
        }
    }
}
